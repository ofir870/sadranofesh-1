{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\src\\\\pages\\\\Home\\\\Home.jsx\";\nimport React, { Component } from 'react';\nimport Calendar from 'react-calendar';\nimport \"./home.css\";\nimport api from '../../api';\nimport { Button } from 'react-bootstrap';\nimport Popup from \"reactjs-popup\";\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      await api.getNotAprovedOrders().then(orders => {\n        console.log(orders);\n        this.setState({\n          orders: orders.data.data\n        });\n        console.log(' Aproved-orders-List -> render -> orders', orders);\n      });\n    };\n\n    this.updateOrderFalse = async id => {\n      const aproved = \"false\";\n      const payload = {\n        aproved\n      };\n      await api.ordersAproved(id, payload).then(res => {\n        let index = this.state.orders.findIndex(order => order.id = id);\n        let array = this.state.orders;\n        array.splice(index, 1);\n        this.setState({\n          orders: array\n        });\n      });\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      const order = {\n        userName: this.state.userName,\n        aproved: this.state.aproved,\n        isFromBeerot: this.state.isFromBeerot,\n        price: this.state.price,\n        note: this.state.note,\n        startDate: this.state.startDate,\n        endDate: this.state.endDate\n      };\n      order.startDate = order.startDate.toDateString();\n      order.endDate = order.endDate.toDateString();\n\n      if (order.isFromBeerot === \"בחר\") {\n        alert(\"ההזמנה לא נשלחה: נא לבחור האם אתה חבר\");\n        return;\n      }\n\n      await api.createOrder(order).then(console.log(' order', order));\n      alert(\"Order Added sucssafuly\");\n      this.setState({\n        startDate: new Date(),\n        endDate: new Date(),\n        price: \"\",\n        note: \"\",\n        isFromBeerot: \"\"\n      });\n      window.location.assign(\"http://localhost:3000/home\");\n    };\n\n    this.onChange = date => {\n      this.setState({\n        startDate: date[0],\n        endDate: date[1]\n      });\n    };\n\n    this.state = {\n      userName: \"ofir\",\n      aproved: \"waiting\",\n      isfromBeerot: null,\n      note: \"\",\n      startDate: new Date(),\n      price: 0,\n      endDate: new Date(),\n      orders: []\n    };\n    this.onChangeUserName = this.onChangeUserName.bind(this);\n    this.onChangeAproved = this.onChangeAproved.bind(this);\n    this.onChangeNote = this.onChangeNote.bind(this);\n    this.onChange = this.onChange.bind(this);\n    this.onChangeIsAnswar = this.onChangeIsAnswar.bind(this);\n    this.onChangeIsFromBeerot = this.onChangeIsFromBeerot.bind(this);\n    this.onChangePrice = this.onChangePrice.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    this.updateOrderFalse = this.updateOrderFalse.bind(this);\n    this.changePrice = this.changePrice.bind(this);\n  }\n\n  renderTableData() {\n    return this.state.orders.map((orders, index) => {\n      const _id = orders._id,\n            startDate = orders.startDate,\n            endDate = orders.endDate,\n            userName = orders.userName,\n            aproved = orders.aproved,\n            note = orders.note,\n            createdAt = orders.createdAt; //destructuring\n\n      return React.createElement(\"tr\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, index + 1), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, startDate), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, endDate), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, userName), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, note), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, aproved), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, createdAt), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \" \", React.createElement(\"input\", {\n        onClick: () => this.updateOrderFalse(_id, aproved),\n        type: \"button\",\n        value: \"\\u05D1\\u05D8\\u05DC\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      })));\n    });\n  }\n\n  renderTableHeader() {\n    let header = [\"מספר \", \"תראיך התחלה\", \"תאריך סיום\", \"שם משתמש\", \" הודעה\", \"האם ההזמנה אושרה\", \"תאריך הזמנה\", \"אשר\", \"בטל\"];\n    return header.map((key, index) => {\n      return React.createElement(\"th\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, key.toUpperCase());\n    });\n  }\n\n  onChangeUserName(e) {\n    this.setState({\n      userName: e.target.value\n    });\n  }\n\n  onChangePrice(e) {\n    this.setState({\n      price: e.target.value\n    });\n  }\n\n  onChangeIsAnswar(e) {\n    this.setState({\n      isAnswar: e.target.value\n    });\n  }\n\n  changePrice(isMemberOfBeerot) {\n    if (isMemberOfBeerot === \"true\") {\n      this.setState({\n        price: 50\n      });\n    } else {\n      this.setState({\n        price: 350\n      });\n    }\n  }\n\n  onChangeIsFromBeerot(e) {\n    this.setState({\n      isFromBeerot: e.target.value\n    });\n    this.changePrice(e.target.value);\n  }\n\n  onChangeNote(e) {\n    this.setState({\n      note: e.target.value\n    });\n  }\n\n  onChangeAproved(e) {\n    if (this.state.aproved === false) {\n      this.setState({\n        aproved: true\n      });\n    } else {\n      this.setState({\n        aproved: false\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"order-form\",\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"calender-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(Calendar, {\n      activeStartDate: new Date(),\n      selectRange: true,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"button-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Popup, {\n      trigger: React.createElement(Button, {\n        onClick: this.onClickButton,\n        variant: \"secondary\",\n        size: \"lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"\\u05DC\\u05D4\\u05D6\\u05DE\\u05E0\\u05D4 \\u05D1\\u05D7\\u05E8 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DB\\u05D9\\u05DD \\u05D5\\u05DC\\u05D7\\u05E5 \\u05E2\\u05DC\\u05D9\\u05D9\"),\n      position: \"bottom center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"w-100 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"\\u05D4\\u05D0\\u05DD \\u05D4\\u05D4\\u05D6\\u05DE\\u05E0\\u05D4 \\u05D4\\u05D9\\u05D0 \\u05DC\\u05D7\\u05D1\\u05E8 \\u05D1\\u05D0\\u05E8\\u05D5\\u05EA \\u05D9\\u05E6\\u05D7\\u05E7?\"), React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      dir: \"rtl\",\n      className: \"form-control form-control-sm\",\n      name: \"isBeerot\",\n      required: true,\n      onChange: this.onChangeIsFromBeerot,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      dir: \"rtl\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"\\u05D1\\u05D7\\u05E8\"), React.createElement(\"option\", {\n      value: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"\\u05DB\\u05DF\"), React.createElement(\"option\", {\n      value: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"\\u05DC\\u05D0\"))), React.createElement(\"div\", {\n      className: \"form-group item-centerd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"w-100 text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, \"\\u05E9\\u05DC\\u05D7 \\u05D4\\u05D5\\u05D3\\u05E2\\u05D4 \\u05DC\\u05DE\\u05E0\\u05D4\\u05DC\"), React.createElement(\"textarea\", {\n      className: \"form-group text-right\",\n      name: \"message\",\n      value: this.state.note,\n      required: true,\n      onChange: this.onChangeNote,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"create order\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    })), React.createElement(\"h4\", {\n      className: \"text-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"  \\u05DE\\u05D7\\u05D9\\u05E8 \\u05D4\\u05D3\\u05D9\\u05E8\\u05D4 \\u05DC\\u05D9\\u05D5\\u05DD \\u05D0\\u05D7\\u05D3: \", this.state.price)))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      id: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"  \\u05D4\\u05D6\\u05DE\\u05E0\\u05D5\\u05EA \\u05DC\\u05D0\\u05D9\\u05E9\\u05D5\\u05E8 \"), React.createElement(\"table\", {\n      id: \"users\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, this.renderTableHeader()), this.renderTableData()))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Ofir/Documents/GitHub/sadranofesh-1/client/src/pages/Home/Home.jsx"],"names":["React","Component","Calendar","api","Button","Popup","Home","constructor","props","componentDidMount","getNotAprovedOrders","then","orders","console","log","setState","data","updateOrderFalse","id","aproved","payload","ordersAproved","res","index","state","findIndex","order","array","splice","onSubmit","e","preventDefault","userName","isFromBeerot","price","note","startDate","endDate","toDateString","alert","createOrder","Date","window","location","assign","onChange","date","isfromBeerot","onChangeUserName","bind","onChangeAproved","onChangeNote","onChangeIsAnswar","onChangeIsFromBeerot","onChangePrice","changePrice","renderTableData","map","_id","createdAt","renderTableHeader","header","key","toUpperCase","target","value","isAnswar","isMemberOfBeerot","render","onClickButton"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Calendar from 'react-calendar';\r\nimport \"./home.css\";\r\nimport api from '../../api';\r\nimport { Button } from 'react-bootstrap';\r\nimport Popup from \"reactjs-popup\";\r\n\r\nexport default class Home extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"ofir\",\r\n            aproved: \"waiting\",\r\n            isfromBeerot: null,\r\n            note: \"\",\r\n            startDate: new Date(),\r\n            price: 0,\r\n            endDate: new Date(),\r\n            orders: []\r\n\r\n        }\r\n\r\n        this.onChangeUserName = this.onChangeUserName.bind(this)\r\n        this.onChangeAproved = this.onChangeAproved.bind(this)\r\n        this.onChangeNote = this.onChangeNote.bind(this)\r\n        this.onChange = this.onChange.bind(this)\r\n        this.onChangeIsAnswar = this.onChangeIsAnswar.bind(this)\r\n        this.onChangeIsFromBeerot = this.onChangeIsFromBeerot.bind(this)\r\n        this.onChangePrice = this.onChangePrice.bind(this)\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.updateOrderFalse = this.updateOrderFalse.bind(this)\r\n        this.changePrice = this.changePrice.bind(this)\r\n        \r\n\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        await api.getNotAprovedOrders().then(orders => {\r\n            console.log(orders)\r\n\r\n            this.setState({\r\n                orders: orders.data.data\r\n\r\n            })\r\n\r\n\r\n            console.log(' Aproved-orders-List -> render -> orders', orders)\r\n        })\r\n    }\r\n    updateOrderFalse = async (id) => {\r\n        const aproved = \"false\"\r\n        const payload = { aproved }\r\n\r\n        await api.ordersAproved(id, payload).then(res => {\r\n\r\n            let index = this.state.orders.findIndex((order) => order.id = id)\r\n            let array = this.state.orders\r\n\r\n            array.splice(index, 1)\r\n\r\n            this.setState({\r\n                orders: array\r\n            })\r\n        })\r\n    }\r\n    renderTableData() {\r\n        return this.state.orders.map((orders, index) => {\r\n            const { _id, startDate, endDate, userName, aproved, note, createdAt } = orders //destructuring\r\n            return (\r\n                <tr key={index}>\r\n                    <td>{index + 1}</td>\r\n                    <td>{startDate}</td>\r\n                    <td>{endDate}</td>\r\n                    <td>{userName}</td>\r\n                    <td>{note}</td>\r\n                    <td>{aproved}</td>\r\n                    <td>{createdAt}</td>\r\n\r\n              \r\n                    <td  > <input onClick={() => this.updateOrderFalse(_id, aproved)} type=\"button\" value=\"בטל\" /></td>\r\n                </tr>\r\n            )\r\n        })\r\n    }\r\n\r\n    renderTableHeader() {\r\n        let header = [\"מספר \", \"תראיך התחלה\", \"תאריך סיום\", \"שם משתמש\", \" הודעה\", \"האם ההזמנה אושרה\", \"תאריך הזמנה\", \"אשר\", \"בטל\"]\r\n        return header.map((key, index) => {\r\n            return <th key={index}>{key.toUpperCase()}</th>\r\n        })\r\n    }\r\n\r\n    onChangeUserName(e) {\r\n        this.setState({\r\n            userName: e.target.value\r\n        });\r\n\r\n    }\r\n\r\n    onChangePrice(e) {\r\n        this.setState({\r\n            price: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangeIsAnswar(e) {\r\n        this.setState({\r\n            isAnswar: e.target.value\r\n        });\r\n    }\r\n    changePrice(isMemberOfBeerot) {\r\n        if (isMemberOfBeerot === \"true\") {\r\n            this.setState({\r\n                price: 50\r\n            })\r\n        } else {\r\n            this.setState({\r\n                price: 350\r\n            })\r\n        }\r\n    }\r\n    onChangeIsFromBeerot(e) {\r\n\r\n        this.setState({\r\n            isFromBeerot: e.target.value,\r\n\r\n        });\r\n        this.changePrice(e.target.value)\r\n\r\n\r\n\r\n    }\r\n    onChangeNote(e) {\r\n        this.setState({\r\n            note: e.target.value\r\n        });\r\n    }\r\n    onChangeAproved(e) {\r\n        if (this.state.aproved === false) {\r\n            this.setState({\r\n                aproved: true\r\n            });\r\n        } else {\r\n            this.setState({\r\n                aproved: false\r\n            });\r\n        }\r\n    }\r\n\r\n    onSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const order = {\r\n            userName: this.state.userName,\r\n            aproved: this.state.aproved,\r\n            isFromBeerot: this.state.isFromBeerot,\r\n            price: this.state.price,\r\n            note: this.state.note,\r\n            startDate: this.state.startDate,\r\n            endDate: this.state.endDate\r\n        }\r\n\r\n        order.startDate = order.startDate.toDateString()\r\n        order.endDate = order.endDate.toDateString()\r\n        if (order.isFromBeerot === \"בחר\") {\r\n            alert(\"ההזמנה לא נשלחה: נא לבחור האם אתה חבר\")\r\n            return\r\n        }\r\n        await api.createOrder(order).then(\r\n\r\n            console.log(' order', order)\r\n\r\n        )\r\n        alert(\"Order Added sucssafuly\")\r\n\r\n        this.setState({\r\n            startDate: new Date(),\r\n            endDate: new Date(),\r\n            price: \"\",\r\n            note: \"\",\r\n            isFromBeerot: \"\"\r\n        })\r\n        window.location.assign(\"http://localhost:3000/home\")\r\n    }\r\n\r\n    onChange = date => {\r\n\r\n\r\n        this.setState({\r\n            startDate: date[0],\r\n            endDate: date[1]\r\n        })\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n\r\n                <form className=\"order-form\" onSubmit={this.onSubmit}>\r\n                    <div className=\"calender-wrapper\">\r\n                        <Calendar\r\n                            activeStartDate={new Date()}\r\n                            selectRange={true}\r\n                            onChange={this.onChange}\r\n                        />\r\n                    </div>\r\n                    \r\n                    <div className=\"button-wrapper\">\r\n                        <Popup trigger={<Button onClick={this.onClickButton} variant=\"secondary\" size=\"lg\">\r\n                            להזמנה בחר תאריכים ולחץ עליי\r\n  </Button>} position=\"bottom center\" >\r\n                            <label className=\"w-100 text-right\">\r\n                                האם ההזמנה היא לחבר בארות יצחק?\r\n            </label>\r\n            \r\n                            <div className=\"col\"  >\r\n                                <select\r\n                                    dir=\"rtl\"\r\n                                    className=\"form-control form-control-sm\"\r\n                                    name=\"isBeerot\"\r\n                                    required\r\n                                    onChange={this.onChangeIsFromBeerot}\r\n                                >\r\n                                    <option dir=\"rtl\">בחר</option>\r\n                                    <option value={true}>כן</option>\r\n                                    <option value={false}>לא</option>\r\n                                </select>\r\n                            </div>\r\n                    <div className=\"form-group item-centerd\">\r\n                        <label className=\"w-100 text-right\">\r\n                            שלח הודעה למנהל\r\n            </label>\r\n                        <textarea\r\n\r\nclassName=\"form-group text-right\"\r\nname=\"message\"\r\nvalue={this.state.note}\r\nrequired\r\nonChange={this.onChangeNote}  >\r\n                        </textarea>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n\r\n                        <input type=\"submit\" value=\"create order\" className=\"btn btn-primary\"></input>\r\n\r\n                    </div>\r\n\r\n                    <h4 className=\"text-right\">  מחיר הדירה ליום אחד: {this.state.price}</h4>\r\n</Popup>\r\n</div>\r\n                </form>\r\n                <div>\r\n                <h1 id='title'>  הזמנות לאישור </h1>\r\n                <table id='users'>\r\n                    <tbody>\r\n                        <tr>{this.renderTableHeader()}</tr>\r\n                        {this.renderTableData()}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}