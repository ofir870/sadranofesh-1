{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ofir\\\\Documents\\\\GitHub\\\\sadranofesh-1\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import Calendar from'react-calendar';import\"./home.css\";import api from'../../api';import{Button}from'react-bootstrap';import Popup from\"reactjs-popup\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);function Home(props){var _this;_classCallCheck(this,Home);_this=_possibleConstructorReturn(this,_getPrototypeOf(Home).call(this,props));_this.componentDidMount=function(){api.getOrdersByUserName(_this.state.userName).then(function(orders){_this.setState({orders:orders.data.data});}).then(api.getAprovedOrders().then(function(orders){console.log(orders);}));};_this.onSubmit=function _callee(e){var order;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();order={userName:_this.state.userName,aproved:_this.state.aproved,isFromBeerot:_this.state.isFromBeerot,price:_this.state.price,note:_this.state.note,startDate:_this.state.startDate,endDate:_this.state.endDate};order.startDate=order.startDate.toDateString();order.endDate=order.endDate.toDateString();if(!(order.isFromBeerot===\"בחר\")){_context.next=7;break;}alert(\"ההזמנה לא נשלחה: נא לבחור האם אתה חבר\");return _context.abrupt(\"return\");case 7:_context.next=9;return _regeneratorRuntime.awrap(api.createOrder(order).then(console.log(' order',order)));case 9:alert(\"Order Added sucssafuly\");_this.setState({startDate:new Date(),endDate:new Date(),price:\"\",note:\"\",isFromBeerot:\"\"});window.location.assign(\"http://localhost:3000/home\");case 12:case\"end\":return _context.stop();}}});};_this.onChange=function(date){_this.setState({startDate:date[0],endDate:date[1]});// change color test\nvar i=0;_this.state.datesArray.forEach(function(disabledDate){return disabledDate.forEach(function(date){console.log(date[0]+\" :\"+date[1]);i++;// \n// if () {\n//     console.log(\"errrrrrrrrrrrrrrrrrrrrrrrrrrroooooooooeeeeeeeeeeeeeeeee\")\n// }\n});});};_this.state={userName:\"michal\",aproved:\"waiting\",isfromBeerot:null,note:\"\",startDate:\"\",price:0,endDate:\"\",orders:[],aprovedOrders:[],datesArray:[],color:\"red\",value:\"\"};_this.onChangeUserName=_this.onChangeUserName.bind(_assertThisInitialized(_this));_this.onChangeAproved=_this.onChangeAproved.bind(_assertThisInitialized(_this));_this.onChangeNote=_this.onChangeNote.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));_this.onChangeIsAnswar=_this.onChangeIsAnswar.bind(_assertThisInitialized(_this));_this.onChangeIsFromBeerot=_this.onChangeIsFromBeerot.bind(_assertThisInitialized(_this));_this.onChangePrice=_this.onChangePrice.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.deleteOrder=_this.deleteOrder.bind(_assertThisInitialized(_this));_this.changePrice=_this.changePrice.bind(_assertThisInitialized(_this));return _this;}_createClass(Home,[{key:\"deleteOrder\",value:function deleteOrder(id){var _this2=this;api.deleteOrderById(id).then(function(){var index=_this2.state.orders.findIndex(function(order){return order.id=id;});var array=_this2.state.orders;array.splice(index,1);_this2.setState({orders:array});});}},{key:\"renderTableData\",value:function renderTableData(){var _this3=this;return this.state.orders.map(function(orders,index){var _id=orders._id,startDate=orders.startDate,endDate=orders.endDate,aproved=orders.aproved,note=orders.note;//destructuring\nif(aproved===\"true\"){return React.createElement(\"tr\",{style:{backgroundColor:\"#569834cd\"},key:index},React.createElement(\"td\",null,index+1),React.createElement(\"td\",null,startDate),React.createElement(\"td\",null,endDate),React.createElement(\"td\",null,note),React.createElement(\"td\",null,aproved),React.createElement(\"td\",null,\" \",React.createElement(\"input\",{onClick:function onClick(){return _this3.deleteOrder(_id);},type:\"button\",value:\"\\u05D1\\u05D8\\u05DC\"})));}if(aproved===\"false\"){return React.createElement(\"tr\",{style:{backgroundColor:\"#EA413A\"},key:index},React.createElement(\"td\",null,index+1),React.createElement(\"td\",null,startDate),React.createElement(\"td\",null,endDate),React.createElement(\"td\",null,note),React.createElement(\"td\",null,aproved),React.createElement(\"td\",null,\" \",React.createElement(\"input\",{onClick:function onClick(){return _this3.deleteOrder(_id);},type:\"button\",value:\"\\u05D1\\u05D8\\u05DC\"})));}if(aproved===\"waiting\"){return React.createElement(\"tr\",{key:index},React.createElement(\"td\",null,index+1),React.createElement(\"td\",null,startDate),React.createElement(\"td\",null,endDate),React.createElement(\"td\",null,note),React.createElement(\"td\",null,aproved),React.createElement(\"td\",null,\" \",React.createElement(\"input\",{onClick:function onClick(){return _this3.deleteOrder(_id);},type:\"button\",value:\"\\u05D1\\u05D8\\u05DC\"})));}});}},{key:\"renderTableHeader\",value:function renderTableHeader(){var header=[\"מספר \",\"תראיך התחלה\",\"תאריך סיום\",\" הודעה\",\"האם ההזמנה אושרה\",\"בטל\"];return header.map(function(key,index){return React.createElement(\"th\",{key:index},key.toUpperCase());});}},{key:\"onChangeUserName\",value:function onChangeUserName(e){this.setState({userName:e.target.value});}},{key:\"onChangePrice\",value:function onChangePrice(e){var array=this.state.disabledDate.data.data;console.log(array);this.setState({price:e.target.value});}},{key:\"onChangeIsAnswar\",value:function onChangeIsAnswar(e){this.setState({isAnswar:e.target.value});}},{key:\"changePrice\",value:function changePrice(isMemberOfBeerot){if(isMemberOfBeerot===\"true\"){this.setState({price:50});}else{this.setState({price:350});}}},{key:\"onChangeIsFromBeerot\",value:function onChangeIsFromBeerot(e){var value=e.target.value;if(value==='true'){value=true;}else{value=false;};this.setState({isFromBeerot:value});this.changePrice(e.target.value);}},{key:\"onChangeNote\",value:function onChangeNote(e){this.setState({note:e.target.value});}},{key:\"onChangeAproved\",value:function onChangeAproved(e){if(this.state.aproved===false){this.setState({aproved:true});}else{this.setState({aproved:false});}}},{key:\"render\",value:function render(){var _this4=this;Date.prototype.addDays=function(days){var date=new Date(this.valueOf());date.setDate(date.getDate()+days);return date;};var disabledDates=[];if(this.state.datesArray.length===0){api.getAprovedOrders().then(function(orders){for(var i in orders.data.data){var newStartdate=new Date(orders.data.data[i].startDate);var newEndDate=new Date(orders.data.data[i].endDate);var dateArray=[];while(newStartdate<=newEndDate){dateArray.push(newStartdate);newStartdate=newStartdate.addDays(1);}disabledDates=dateArray;_this4.state.datesArray.push(dateArray);}console.log([disabledDates]);console.log(_this4.state.datesArray);});}return React.createElement(\"div\",null,React.createElement(\"form\",{className:\"order-form\",onSubmit:this.onSubmit},React.createElement(\"div\",{className:\"calender-wrapper\"},React.createElement(Calendar,{activeStartDate:new Date(),selectRange:true,onChange:this.onChange,tileDisabled:function tileDisabled(_ref){var date=_ref.date,view=_ref.view;return view==='month'&&// Block day tiles only\n_this4.state.datesArray.some(function(disabledDate){return disabledDate.some(function(disabledDate){return date.getFullYear()===disabledDate.getFullYear()&&date.getMonth()===disabledDate.getMonth()&&date.getDate()===disabledDate.getDate();});});}})),React.createElement(\"div\",{className:\"button-wrapper\"},React.createElement(Popup,{trigger:React.createElement(Button,{onClick:this.onClickButton,variant:\"secondary\",size:\"lg\"},\"\\u05DC\\u05D4\\u05D6\\u05DE\\u05E0\\u05D4 \\u05D1\\u05D7\\u05E8 \\u05EA\\u05D0\\u05E8\\u05D9\\u05DB\\u05D9\\u05DD \\u05D5\\u05DC\\u05D7\\u05E5 \\u05E2\\u05DC\\u05D9\\u05D9\"),position:\"bottom center\"},React.createElement(\"label\",{className:\"w-100 text-right\"},\"\\u05D4\\u05D0\\u05DD \\u05D4\\u05D4\\u05D6\\u05DE\\u05E0\\u05D4 \\u05D4\\u05D9\\u05D0 \\u05DC\\u05D7\\u05D1\\u05E8 \\u05D1\\u05D0\\u05E8\\u05D5\\u05EA \\u05D9\\u05E6\\u05D7\\u05E7?\"),React.createElement(\"div\",{className:\"col\"},React.createElement(\"select\",{dir:\"rtl\",className:\"form-control form-control-sm\",name:\"isBeerot\",required:true,onChange:this.onChangeIsFromBeerot},React.createElement(\"option\",{dir:\"rtl\"},\"\\u05D1\\u05D7\\u05E8\"),React.createElement(\"option\",{value:true},\"\\u05DB\\u05DF\"),React.createElement(\"option\",{value:false},\"\\u05DC\\u05D0\"))),typeof this.state.isFromBeerot===\"boolean\"?React.createElement(\"div\",null,React.createElement(\"div\",{className:\"form-group item-centerd\"},React.createElement(\"label\",{className:\"w-100 text-right\"},\"\\u05E9\\u05DC\\u05D7 \\u05D4\\u05D5\\u05D3\\u05E2\\u05D4 \\u05DC\\u05DE\\u05E0\\u05D4\\u05DC\"),React.createElement(\"textarea\",{className:\"form-group text-right\",name:\"message\",value:this.state.note,required:true,onChange:this.onChangeNote})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"submit\",value:\"create order\",className:\"btn btn-primary\"}),React.createElement(\"h5\",{className:\"text-right\"},\"  \\u05DE\\u05D7\\u05D9\\u05E8 \\u05D4\\u05D3\\u05D9\\u05E8\\u05D4 \\u05DC\\u05D9\\u05D5\\u05DD: \",this.state.price))):React.createElement(\"div\",null)))),React.createElement(\"div\",null,React.createElement(\"h1\",{id:\"title\"},\" \\u05D4\\u05D4\\u05D6\\u05DE\\u05E0\\u05D5\\u05EA \\u05E9\\u05DC\\u05D9 \"),this.state.isfromBeerot,React.createElement(\"table\",{id:\"users\"},React.createElement(\"tbody\",null,React.createElement(\"tr\",null,this.renderTableHeader()),this.renderTableData()))));}}]);return Home;}(Component);export{Home as default};","map":{"version":3,"sources":["C:/Users/Ofir/Documents/GitHub/sadranofesh-1/client/src/pages/Home/Home.jsx"],"names":["React","Component","Calendar","api","Button","Popup","Home","props","componentDidMount","getOrdersByUserName","state","userName","then","orders","setState","data","getAprovedOrders","console","log","onSubmit","e","preventDefault","order","aproved","isFromBeerot","price","note","startDate","endDate","toDateString","alert","createOrder","Date","window","location","assign","onChange","date","i","datesArray","forEach","disabledDate","isfromBeerot","aprovedOrders","color","value","onChangeUserName","bind","onChangeAproved","onChangeNote","onChangeIsAnswar","onChangeIsFromBeerot","onChangePrice","deleteOrder","changePrice","id","deleteOrderById","index","findIndex","array","splice","map","_id","backgroundColor","header","key","toUpperCase","target","isAnswar","isMemberOfBeerot","prototype","addDays","days","valueOf","setDate","getDate","disabledDates","length","newStartdate","newEndDate","dateArray","push","view","some","getFullYear","getMonth","onClickButton","renderTableHeader","renderTableData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Calendar from 'react-calendar';\r\nimport \"./home.css\";\r\nimport api from '../../api';\r\nimport { Button } from 'react-bootstrap';\r\nimport Popup from \"reactjs-popup\";\r\n\r\nexport default class Home extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            userName: \"michal\",\r\n            aproved: \"waiting\",\r\n            isfromBeerot: null,\r\n            note: \"\",\r\n            startDate: \"\",\r\n            price: 0,\r\n            endDate: \"\",\r\n            orders: [],\r\n            aprovedOrders: [],\r\n            datesArray: [],\r\n            color: \"red\",\r\n            value:\"\"\r\n        }\r\n\r\n        this.onChangeUserName = this.onChangeUserName.bind(this)\r\n        this.onChangeAproved = this.onChangeAproved.bind(this)\r\n        this.onChangeNote = this.onChangeNote.bind(this)\r\n        this.onChange = this.onChange.bind(this)\r\n        this.onChangeIsAnswar = this.onChangeIsAnswar.bind(this)\r\n        this.onChangeIsFromBeerot = this.onChangeIsFromBeerot.bind(this)\r\n        this.onChangePrice = this.onChangePrice.bind(this)\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.deleteOrder = this.deleteOrder.bind(this)\r\n        this.changePrice = this.changePrice.bind(this)\r\n\r\n    }\r\n\r\n    componentDidMount = () => {\r\n\r\n        api.getOrdersByUserName(this.state.userName).then(orders => {\r\n\r\n            this.setState({ orders: orders.data.data })\r\n        })\r\n\r\n            .then(api.getAprovedOrders().then(orders => {\r\n                console.log(orders)\r\n            }))\r\n    }\r\n\r\n    deleteOrder(id) {\r\n        api.deleteOrderById(id).then(() => {\r\n            let index = this.state.orders.findIndex((order) => order.id = id)\r\n\r\n            let array = this.state.orders\r\n            array.splice(index, 1)\r\n            this.setState({\r\n                orders: array\r\n            })\r\n        })\r\n    }\r\n    renderTableData() {\r\n        return this.state.orders.map((orders, index) => {\r\n\r\n            const { _id, startDate, endDate, aproved, note } = orders //destructuring\r\n            if (aproved === \"true\") {\r\n                return (\r\n\r\n                    <tr style={{ backgroundColor: \"#569834cd\" }} key={index}>\r\n                        <td>{index + 1}</td>\r\n                        <td>{startDate}</td>\r\n                        <td>{endDate}</td>\r\n                        <td>{note}</td>\r\n                        <td >{aproved}</td>\r\n                        <td  > <input onClick={() => this.deleteOrder(_id)} type=\"button\" value=\"בטל\" /></td>\r\n                    </tr>\r\n\r\n                )\r\n            } if (aproved === \"false\") {\r\n                return (\r\n\r\n                    <tr style={{ backgroundColor: \"#EA413A\" }} key={index}>\r\n                        <td>{index + 1}</td>\r\n                        <td>{startDate}</td>\r\n                        <td>{endDate}</td>\r\n                        <td>{note}</td>\r\n                        <td  >{aproved}</td>\r\n                        <td  > <input onClick={() => this.deleteOrder(_id)} type=\"button\" value=\"בטל\" /></td>\r\n                    </tr>\r\n\r\n                )\r\n            }\r\n\r\n            if (aproved === \"waiting\") {\r\n                return (\r\n\r\n                    <tr key={index}>\r\n                        <td>{index + 1}</td>\r\n                        <td>{startDate}</td>\r\n                        <td>{endDate}</td>\r\n                        <td>{note}</td>\r\n                        <td >{aproved}</td>\r\n                        <td  > <input onClick={() => this.deleteOrder(_id)} type=\"button\" value=\"בטל\" /></td>\r\n                    </tr>\r\n\r\n                )\r\n            }\r\n\r\n\r\n        })\r\n\r\n\r\n    }\r\n\r\n    renderTableHeader() {\r\n        let header = [\"מספר \", \"תראיך התחלה\", \"תאריך סיום\", \" הודעה\", \"האם ההזמנה אושרה\", \"בטל\"]\r\n        return header.map((key, index) => {\r\n            return <th key={index}>{key.toUpperCase()}</th>\r\n        })\r\n    }\r\n\r\n    onChangeUserName(e) {\r\n        this.setState({\r\n            userName: e.target.value\r\n        });\r\n\r\n    }\r\n\r\n    onChangePrice(e) {\r\n        let array = this.state.disabledDate.data.data\r\n        console.log(array)\r\n        this.setState({\r\n            price: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangeIsAnswar(e) {\r\n        this.setState({\r\n            isAnswar: e.target.value\r\n        });\r\n    }\r\n    changePrice(isMemberOfBeerot) {\r\n\r\n\r\n        if (isMemberOfBeerot === \"true\") {\r\n            this.setState({\r\n                price: 50\r\n            })\r\n        } else {\r\n            this.setState({\r\n                price: 350\r\n            })\r\n        }\r\n    }\r\n    onChangeIsFromBeerot(e) {\r\n        let value = e.target.value\r\n        if (value === 'true') {\r\n            value = true\r\n        } else {\r\n            value = false;\r\n        };\r\n\r\n        this.setState({\r\n            isFromBeerot: value,\r\n\r\n        });\r\n        this.changePrice(e.target.value)\r\n\r\n\r\n\r\n    }\r\n    onChangeNote(e) {\r\n        this.setState({\r\n            note: e.target.value\r\n        });\r\n    }\r\n    onChangeAproved(e) {\r\n        if (this.state.aproved === false) {\r\n            this.setState({\r\n                aproved: true\r\n            });\r\n        } else {\r\n            this.setState({\r\n                aproved: false\r\n            });\r\n        }\r\n    }\r\n\r\n    onSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const order = {\r\n            userName: this.state.userName,\r\n            aproved: this.state.aproved,\r\n            isFromBeerot: this.state.isFromBeerot,\r\n            price: this.state.price,\r\n            note: this.state.note,\r\n            startDate: this.state.startDate,\r\n            endDate: this.state.endDate\r\n        }\r\n\r\n        order.startDate = order.startDate.toDateString()\r\n        order.endDate = order.endDate.toDateString()\r\n        if (order.isFromBeerot === \"בחר\") {\r\n            alert(\"ההזמנה לא נשלחה: נא לבחור האם אתה חבר\")\r\n            return\r\n        }\r\n        await api.createOrder(order).then(\r\n\r\n            console.log(' order', order)\r\n\r\n        )\r\n        alert(\"Order Added sucssafuly\")\r\n\r\n        this.setState({\r\n            startDate: new Date(),\r\n            endDate: new Date(),\r\n            price: \"\",\r\n            note: \"\",\r\n            isFromBeerot: \"\"\r\n        })\r\n        window.location.assign(\"http://localhost:3000/home\")\r\n    }\r\n\r\n    onChange = date => {\r\n\r\n\r\n        this.setState({\r\n            startDate: date[0],\r\n            endDate: date[1]\r\n        })\r\n        // change color test\r\n\r\n\r\n        let i = 0;\r\n\r\n        this.state.datesArray.forEach(disabledDate => disabledDate.forEach(date => {\r\n            console.log(date[0] + \" :\" + date[1])\r\n            i++\r\n            // \r\n            // if () {\r\n            //     console.log(\"errrrrrrrrrrrrrrrrrrrrrrrrrrroooooooooeeeeeeeeeeeeeeeee\")\r\n            // }\r\n\r\n        }))\r\n    }\r\n\r\n    render() {\r\n\r\n\r\n        Date.prototype.addDays = function (days) {\r\n            var date = new Date(this.valueOf());\r\n            date.setDate(date.getDate() + days);\r\n            return date;\r\n        }\r\n\r\n        let disabledDates = [];\r\n        if (this.state.datesArray.length === 0) {\r\n            api.getAprovedOrders().then(orders => {\r\n                for (let i in orders.data.data) {\r\n                    let newStartdate = new Date(orders.data.data[i].startDate)\r\n                    let newEndDate = new Date(orders.data.data[i].endDate)\r\n\r\n                    var dateArray = [];\r\n                    while (newStartdate <= newEndDate) {\r\n                        dateArray.push(newStartdate)\r\n                        newStartdate = newStartdate.addDays(1);\r\n                    }\r\n\r\n                    disabledDates = dateArray;\r\n                    this.state.datesArray.push(dateArray)\r\n\r\n                }\r\n\r\n                console.log([disabledDates])\r\n                console.log(this.state.datesArray)\r\n\r\n            })\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <form className=\"order-form\" onSubmit={this.onSubmit}>\r\n                    <div className=\"calender-wrapper\">\r\n                        <Calendar\r\n                            activeStartDate={new Date()}\r\n                            selectRange={true}\r\n                            onChange={this.onChange}\r\n                        \r\n                            tileDisabled={({ date, view }) =>\r\n                                (view === 'month') && // Block day tiles only\r\n\r\n                                this.state.datesArray.some(disabledDate => disabledDate.some(disabledDate =>\r\n                                    date.getFullYear() === disabledDate.getFullYear() &&\r\n                                    date.getMonth() === disabledDate.getMonth() &&\r\n                                    date.getDate() === disabledDate.getDate()\r\n                                ))\r\n                            }\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"button-wrapper\">\r\n                        <Popup trigger={<Button onClick={this.onClickButton} variant=\"secondary\" size=\"lg\">\r\n                            להזמנה בחר תאריכים ולחץ עליי\r\n  </Button>} position=\"bottom center\" >\r\n                            <label className=\"w-100 text-right\">\r\n                                האם ההזמנה היא לחבר בארות יצחק?\r\n            </label>\r\n\r\n                            <div className=\"col\"  >\r\n                                <select\r\n                                    dir=\"rtl\"\r\n                                    className=\"form-control form-control-sm\"\r\n                                    name=\"isBeerot\"\r\n                                    required\r\n                                    onChange={this.onChangeIsFromBeerot}\r\n                                >\r\n                                    <option dir=\"rtl\">בחר</option>\r\n                                    <option value={true}>כן</option>\r\n                                    <option value={false}>לא</option>\r\n                                </select>\r\n                            </div>\r\n                            {typeof this.state.isFromBeerot === \"boolean\" ?\r\n\r\n                                <div>\r\n                                    <div className=\"form-group item-centerd\">\r\n                                        <label className=\"w-100 text-right\">\r\n                                            שלח הודעה למנהל\r\n            </label>\r\n\r\n                                        <textarea className=\"form-group text-right\" name=\"message\"\r\n                                            value={this.state.note} required onChange={this.onChangeNote}  >\r\n                                        </textarea>\r\n                                    </div>\r\n\r\n\r\n                                    <div className=\"form-group\">\r\n\r\n                                        <input type=\"submit\" value=\"create order\" className=\"btn btn-primary\"></input>\r\n\r\n                                        <h5 className=\"text-right\">  מחיר הדירה ליום: {this.state.price}</h5>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                                :\r\n\r\n                                <div>\r\n\r\n                                </div>\r\n                            }\r\n                        </Popup>\r\n                    </div>\r\n                </form>\r\n                <div>\r\n                    <h1 id='title'> ההזמנות שלי </h1>\r\n                    {this.state.isfromBeerot}\r\n                    <table id='users'>\r\n                        <tbody>\r\n                            <tr>{this.renderTableHeader()}</tr>\r\n                            {this.renderTableData()}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}